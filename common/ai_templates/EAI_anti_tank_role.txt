############################################################################################################
#	Expert AI mod templates
############################################################################################################

anti_tank_role_early = {
	roles = { anti_tank }
	upgrade_prio = { factor = 0 }
	match_to_count = 1.0

	EARLY_ANTI_TANK_TEMPLATE_1 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 25
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_2 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 25
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				medium_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_3 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 25
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				heavy_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_3 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 25
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				heavy_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_4 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 9
				medium_tank_destroyer_brigade = 2
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_5 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				heavy_tank_destroyer_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_6 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 9
				medium_tank_destroyer_brigade = 2
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_7 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 39
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				anti_tank_brigade = 3
				artillery_brigade = 3
				light_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_8 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 37
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 4
				medium_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_9 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 37
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 4
				heavy_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_10 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 32
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 14
				medium_tank_destroyer_brigade = 2
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_11 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 39
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 5
				heavy_tank_destroyer_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_12 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 4
				medium_tank_destroyer_brigade = 3
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_12 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 18
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				anti_tank_brigade = 1
				light_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_13 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 19
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				medium_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_14 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 19
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				heavy_sp_anti_air_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_15 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 16
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 7
				medium_tank_destroyer_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_15 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 18
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				heavy_tank_destroyer_brigade = 1
			}
		}
	}
	EARLY_ANTI_TANK_TEMPLATE_15 = {
		upgrade_prio = { factor = 0.01 }
		production_prio = { factor = 0.01 }

		# TEMPLATE
		target_width = 19
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 1
			}
		}
	}
}

### Mobile Warfare

Mobile_warfare_20w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	MW_INFANTRY_TEMPLATE_20_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 1
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_20_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_20_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	MW_INFANTRY_TEMPLATE_20_MSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### HTD design
	MW_INFANTRY_TEMPLATE_20_HSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### modern TD design
	MW_INFANTRY_TEMPLATE_20_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10
				
				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}
}

Mobile_warfare_26w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	MW_INFANTRY_TEMPLATE_26_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_26_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_26_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 5
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	MW_INFANTRY_TEMPLATE_26_MSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### HTD design
	MW_INFANTRY_TEMPLATE_26_HSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### modern TD design
	MW_INFANTRY_TEMPLATE_26_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}
}

Mobile_warfare_40w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	MW_INFANTRY_TEMPLATE_40_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				anti_tank_brigade = 3
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_40_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 5
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	MW_INFANTRY_TEMPLATE_40_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 7
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	MW_INFANTRY_TEMPLATE_40_MSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				medium_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### HTD design
	MW_INFANTRY_TEMPLATE_40_HSPAA_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				heavy_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### modern TD design
	MW_INFANTRY_TEMPLATE_40_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				modern_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}
}

### Superior Firepower

Superior_firepower_20w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	SF_INFANTRY_TEMPLATE_20_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 1
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_20_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_20_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### MTD design
	SF_MOTORIZED_TEMPLATE_20_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 7
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_20_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 6
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### HTD design
	SF_INFANTRY_TEMPLATE_20_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### modern TD design
	SF_INFANTRY_TEMPLATE_20_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_20_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 7
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
				modern_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}
}

Superior_firepower_26w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	SF_INFANTRY_TEMPLATE_26_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_26_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_26_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 5
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### MTD design
	SF_MOTORIZED_TEMPLATE_26_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 9
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_26_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 9
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 3
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### HTD design
	SF_INFANTRY_TEMPLATE_26_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### modern TD design
	SF_INFANTRY_TEMPLATE_26_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_26_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 8
				modern_sp_anti_air_brigade = 2
				modern_tank_destroyer_brigade = 1
				modern_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}
}

Superior_firepower_40w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	SF_INFANTRY_TEMPLATE_40_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				anti_tank_brigade = 3
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_40_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 5
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_INFANTRY_TEMPLATE_40_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 7
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### MTD design
	SF_MOTORIZED_TEMPLATE_40_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 14
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_40_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 13
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 3
				medium_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### HTD design
	SF_INFANTRY_TEMPLATE_40_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 5
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	### modern TD design
	SF_INFANTRY_TEMPLATE_40_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 5
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}

	SF_MOTORIZED_TEMPLATE_40_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 14
				modern_sp_anti_air_brigade = 2
				modern_tank_destroyer_brigade = 2
				modern_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
				artillery = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
			artillery
			rocket_artillery
		}
	}
}

### Grand Battleplan

Grand_battleplan_20w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	GB_INFANTRY_TEMPLATE_20_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 1
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_20_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_20_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	GB_MOTORIZED_TEMPLATE_20_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 7
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_20_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 6
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	GB_INFANTRY_TEMPLATE_20_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	GB_INFANTRY_TEMPLATE_20_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_20_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 7
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
				modern_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}

Grand_battleplan_26w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	### AT design
	GB_INFANTRY_TEMPLATE_26_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 2
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_26_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 3
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_26_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 28
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 5
				light_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	GB_MOTORIZED_TEMPLATE_26_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 9
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_26_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 8
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 3
				medium_sp_artillery_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	GB_INFANTRY_TEMPLATE_26_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	GB_INFANTRY_TEMPLATE_26_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_26_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 8
				modern_sp_anti_air_brigade = 2
				modern_tank_destroyer_brigade = 1
				modern_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}

Grand_battleplan_40w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }
		}
	}
	match_to_count = 0.75	

	### AT design
	GB_INFANTRY_TEMPLATE_40_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				anti_tank_brigade = 3
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_40_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 5
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	GB_INFANTRY_TEMPLATE_40_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 7
				artillery_brigade = 3
				light_sp_anti_air_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade
			light_sp_anti_air_brigade

			# SUPPORT
			engineer
			anti_tank
			maintenance_company
		}
	}

	### MTD design
	GB_MOTORIZED_TEMPLATE_40_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 14
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 2
				medium_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_40_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 13
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 3
				medium_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			medium_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	GB_INFANTRY_TEMPLATE_40_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 5
				heavy_sp_anti_air_brigade = 1
				heavy_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_sp_anti_air_brigade
			heavy_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	GB_INFANTRY_TEMPLATE_40_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 5
				modern_sp_anti_air_brigade = 1
				modern_tank_destroyer_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	GB_MOTORIZED_TEMPLATE_40_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# TECH REQ.
				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# TECH REQ.
				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				motorized = 14
				modern_sp_anti_air_brigade = 2
				modern_tank_destroyer_brigade = 2
				modern_sp_artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			motorized
			modern_sp_anti_air_brigade
			modern_tank_destroyer_brigade
			modern_sp_artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}

### Mass Assault

Mass_assault_20w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	################## 20w without infantry width reduction

	### AT design
	MA_INFANTRY_TEMPLATE_20_REGULAR_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				anti_tank_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_REGULAR_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_REGULAR_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				anti_tank_brigade = 3
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	### MTD design
	MA_INFANTRY_TEMPLATE_20_REGULAR_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				medium_tank_destroyer_brigade = 1
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_REGULAR_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				medium_tank_destroyer_brigade = 2
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_tank_destroyer_brigade
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	MA_INFANTRY_TEMPLATE_20_REGULAR_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				heavy_tank_destroyer_brigade = 1
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_REGULAR_HTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				heavy_tank_destroyer_brigade = 2
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	MA_INFANTRY_TEMPLATE_20_REGULAR_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 9
				modern_tank_destroyer_brigade = 1
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_REGULAR_MODERN_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 8
				modern_tank_destroyer_brigade = 2
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	################## 20w with infantry width reduction

	### AT design
	MA_INFANTRY_TEMPLATE_20_LARGE_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 20.2
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 1
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_LARGE_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 21.2
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 2
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_LARGE_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 20.6
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 3
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	### MTD design
	MA_INFANTRY_TEMPLATE_20_LARGE_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20.6
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				medium_tank_destroyer_brigade = 1
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_LARGE_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				medium_tank_destroyer_brigade = 2
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			medium_tank_destroyer_brigade
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	MA_INFANTRY_TEMPLATE_20_LARGE_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 20.6
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				heavy_tank_destroyer_brigade = 1
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_LARGE_HTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				heavy_tank_destroyer_brigade = 2
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	MA_INFANTRY_TEMPLATE_20_LARGE_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 20.6
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				modern_tank_destroyer_brigade = 1
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_20_LARGE_MODERN_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 10
				modern_tank_destroyer_brigade = 2
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}

Mass_assault_40w_anti_tank_role = {
	roles = { anti_tank }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_anti_tank_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }
		}
	}
	match_to_count = 0.75

	################## 40w without infantry width reduction

	### AT design
	MA_INFANTRY_TEMPLATE_40_REGULAR_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				anti_tank_brigade = 3
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_REGULAR_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				anti_tank_brigade = 5
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_REGULAR_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				anti_tank_brigade = 7
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	### MTD design
	MA_INFANTRY_TEMPLATE_40_REGULAR_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 4
				medium_tank_destroyer_brigade = 3
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_REGULAR_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 43
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 11
				artillery_brigade = 4
				medium_tank_destroyer_brigade = 4
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			medium_tank_destroyer_brigade
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	MA_INFANTRY_TEMPLATE_40_REGULAR_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				heavy_tank_destroyer_brigade = 1
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_REGULAR_HTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 43
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				heavy_tank_destroyer_brigade = 2
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	MA_INFANTRY_TEMPLATE_40_REGULAR_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				modern_tank_destroyer_brigade = 1
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_REGULAR_MODERN_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				NOT = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 43
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				modern_tank_destroyer_brigade = 2
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	################## 40w with infantry width reduction

	### AT design
	MA_INFANTRY_TEMPLATE_40_LARGE_AT_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 60 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 16
				anti_tank_brigade = 3
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_LARGE_AT_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 59 } check_variable = { EAI_max_armor_seen < 70 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 15
				anti_tank_brigade = 5
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_LARGE_AT_3 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }
			}
		}

		# TEMPLATE
		target_width = 42
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 14
				anti_tank_brigade = 7
				artillery_brigade = 4
			}

			support = {
				engineer = 1
				anti_tank = 1
				anti_air = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			anti_tank_brigade

			# SUPPORT
			engineer
			anti_tank
			anti_air
			maintenance_company
		}
	}

	### MTD design
	MA_INFANTRY_TEMPLATE_40_LARGE_MTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 65 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 42
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 14
				artillery_brigade = 4
				medium_tank_destroyer_brigade = 3
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_LARGE_MTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 64 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 42
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 13
				artillery_brigade = 4
				medium_tank_destroyer_brigade = 4
				medium_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			medium_tank_destroyer_brigade
			medium_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### HTD design
	MA_INFANTRY_TEMPLATE_40_LARGE_HTD_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 6
				heavy_tank_destroyer_brigade = 1
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_LARGE_HTD_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				NOT = { has_tech = modern_td }
			}
		}

		# TEMPLATE
		target_width = 43
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 6
				heavy_tank_destroyer_brigade = 2
				heavy_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			heavy_tank_destroyer_brigade
			heavy_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### modern TD design
	MA_INFANTRY_TEMPLATE_40_LARGE_MODERN_1 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen < 80 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 6
				modern_tank_destroyer_brigade = 1
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_INFANTRY_TEMPLATE_40_LARGE_MODERN_2 = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH }

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 79 }

				# TECH REQ.
				OR = { has_tech = human_wave_offensive has_tech = vast_offensives }

				has_tech = modern_td
			}
		}

		# TEMPLATE
		target_width = 43
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 3

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				infantry = 12
				artillery_brigade = 6
				modern_tank_destroyer_brigade = 2
				modern_sp_anti_air_brigade = 1
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			infantry
			artillery_brigade
			modern_tank_destroyer_brigade
			modern_sp_anti_air_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}