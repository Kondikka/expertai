############################################################################################################
#	Expert AI mod templates
############################################################################################################

### Starting templates

medium_armor_role_early = {
	roles = { armor }
	upgrade_prio = { factor = 0 }
	match_to_count = 0.6

	EVENT_MEDIUM_ARMOR_TEMPLATE_1 = {
		upgrade_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}
		production_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}

		# TEMPLATE
		target_width = 14
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				motorized = 3
			}
		}
	}
	EVENT_MEDIUM_ARMOR_TEMPLATE_2 = {
		upgrade_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}
		production_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}

		# TEMPLATE
		target_width = 14
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				infantry = 3
			}
		}
	}
	EVENT_MEDIUM_ARMOR_TEMPLATE_3 = {
		upgrade_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}
		production_prio = {
			factor = 0.01

			# FOCUS REQ.
			modifier = { factor = 0 NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } } }
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				infantry = 6
			}
		}
	}
}

### 

medium_armor_basic_template = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = {
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
					NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
				}
			}
		}
	}
	match_to_count = 0.55

	MEDIUM_ARMOR_BASIC_20W = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }
	
				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}

		# TEMPLATE
		target_width = 20
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				motorized = 4
			}

			support = {
				engineer = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			motorized

			# SUPPORT
			engineer
		}
	}

	MEDIUM_ARMOR_BASIC_26W = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }
	
				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				motorized = 5
			}

			support = {
				engineer = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			motorized

			# SUPPORT
			engineer
		}
	}

	MEDIUM_ARMOR_BASIC_40W = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				check_variable = { EAI_FOCUS/LAND/land_doctrine < global.EAI_MA_DOCTRINE } 
				OR = { 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
				}

				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }
	
				if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
					NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				}
				else = {
					OR = {
						NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
						NOT = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 13
				motorized = 7
			}

			support = {
				engineer = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			motorized

			# SUPPORT
			engineer
		}
	}
}

### Mobile Warfare

Mobile_warfare_20w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	MW_MEDIUM_ARMOR_TEMPLATE_20_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_20_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	### design B

	MW_MEDIUM_ARMOR_TEMPLATE_20_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_20_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	### design C

	MW_MEDIUM_ARMOR_TEMPLATE_20_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_20_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10
				
				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}
}

Mobile_warfare_26w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	MW_MEDIUM_ARMOR_TEMPLATE_26_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 9
				medium_sp_anti_air_brigade = 2
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_26_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	### design B

	MW_MEDIUM_ARMOR_TEMPLATE_26_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 2
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_26_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	### design C

	MW_MEDIUM_ARMOR_TEMPLATE_26_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_26_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			recon
			maintenance_company
		}
	}
}

Mobile_warfare_40w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	MW_MEDIUM_ARMOR_TEMPLATE_40_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 14
				medium_sp_anti_air_brigade = 2
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_40_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 13
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}

	### design B

	MW_MEDIUM_ARMOR_TEMPLATE_40_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_artillery_brigade = 4
				medium_sp_anti_air_brigade = 2
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_40_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_artillery_brigade = 4
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}

	### design C

	MW_MEDIUM_ARMOR_TEMPLATE_40_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 6
				medium_sp_anti_air_brigade = 2
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}

	MW_MEDIUM_ARMOR_TEMPLATE_40_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 6
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				recon = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			recon
			maintenance_company
		}
	}
}

### Superior Firepower

Superior_firepower_20w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	SF_MEDIUM_ARMOR_TEMPLATE_20_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_20_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design B

	SF_MEDIUM_ARMOR_TEMPLATE_20_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_260W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_20_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design C

	SF_MEDIUM_ARMOR_TEMPLATE_20_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_20_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}
}

Superior_firepower_26w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	SF_MEDIUM_ARMOR_TEMPLATE_26_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_26_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design B

	SF_MEDIUM_ARMOR_TEMPLATE_26_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_26_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design C

	SF_MEDIUM_ARMOR_TEMPLATE_26_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_26_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			artillery
			maintenance_company
			rocket_artillery
		}
	}
}

Superior_firepower_40w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	SF_MEDIUM_ARMOR_TEMPLATE_40_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 12
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_40_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 11
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design B

	SF_MEDIUM_ARMOR_TEMPLATE_40_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_40_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	### design C

	SF_MEDIUM_ARMOR_TEMPLATE_40_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 5
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}

	SF_MEDIUM_ARMOR_TEMPLATE_40_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 5
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				artillery = 1
				maintenance_company = 1
				rocket_artillery = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			artillery
			maintenance_company
			rocket_artillery
		}
	}
}

### Grand Battleplan

Grand_battleplan_20w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	GB_MEDIUM_ARMOR_TEMPLATE_20_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_20_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	### design B

	GB_MEDIUM_ARMOR_TEMPLATE_20_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_20_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	### design C

	GB_MEDIUM_ARMOR_TEMPLATE_20_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_20_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}
}

Grand_battleplan_26w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	GB_MEDIUM_ARMOR_TEMPLATE_26_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_26_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	### design B

	GB_MEDIUM_ARMOR_TEMPLATE_26_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_26_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 27
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	### design C

	GB_MEDIUM_ARMOR_TEMPLATE_26_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_26_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 26
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				motorized = 5
			}

			support = {
				engineer = 1
				maintenance_company = 1
				logistics_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			maintenance_company
			logistics_company
		}
	}
}

Grand_battleplan_40w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}

			if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
			}
			else = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
			}
		}
	}
	match_to_count = 0.55

	### design A

	GB_MEDIUM_ARMOR_TEMPLATE_40_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 12
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_40_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 40
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 11
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	### design B

	GB_MEDIUM_ARMOR_TEMPLATE_40_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_40_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_artillery_brigade = 3
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	### design C

	GB_MEDIUM_ARMOR_TEMPLATE_40_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_artillery_brigade = 5
				medium_sp_anti_air_brigade = 2
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	GB_MEDIUM_ARMOR_TEMPLATE_40_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_artillery_brigade = 5
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				motorized = 7
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_artillery_brigade
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			motorized

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}
}

### Mass Assault

Mass_assault_20w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}
		}
	}
	match_to_count = 0.55

	### design A

	MA_MEDIUM_ARMOR_TEMPLATE_20_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 4
				medium_sp_anti_air_brigade = 1
				infantry = 4
				artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_20_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 22
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				infantry = 4
				artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### design B

	MA_MEDIUM_ARMOR_TEMPLATE_20_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_anti_air_brigade = 1
				infantry = 5
				artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_20_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				infantry = 5
				artillery_brigade = 2
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	### design C

	MA_MEDIUM_ARMOR_TEMPLATE_20_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 3
				medium_sp_anti_air_brigade = 1
				infantry = 3
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_20_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 21
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 2
				medium_sp_anti_air_brigade = 1
				medium_tank_destroyer_brigade = 1
				infantry = 3
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			maintenance_company
		}
	}
}

Mass_assault_40w_medium_armor_role = {
	roles = { armor }
	upgrade_prio = {
		base = 0

		modifier = { 
			add = 1 
			has_country_flag = EAI_marm_template_upgrade
			check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } 
			check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }
			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}
		}
	}
	match_to_count = 0.55

	### design A

	MA_MEDIUM_ARMOR_TEMPLATE_40_A = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 42
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 8
				medium_sp_anti_air_brigade = 2
				infantry = 9
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_40_A_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 42
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 7
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				infantry = 9
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	### design B

	MA_MEDIUM_ARMOR_TEMPLATE_40_B = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_anti_air_brigade = 2
				infantry = 11
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_40_B_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				infantry = 11
				artillery_brigade = 3
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	### design C

	MA_MEDIUM_ARMOR_TEMPLATE_40_C = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# ADD PIERCING
				if = { limit = { OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td } }

					check_variable = { EAI_max_armor_seen < 70 }
				}
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 6
				medium_sp_anti_air_brigade = 2
				infantry = 7
				artillery_brigade = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}

	MA_MEDIUM_ARMOR_TEMPLATE_40_C_AP = {
		production_prio = {
			base = 0

			modifier = {
				add = 10

				# DOCTRINE REQ.
				check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

				# FOCUS REQ.
				OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } }

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# WIDTH REQ.
				check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}
		upgrade_prio = {
			base = 0

			modifier = {
				add = 10

				# DESIGN REQ.
				check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }

				# TECH REQ.
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }

				# ADD PIERCING
				check_variable = { EAI_max_armor_seen > 69 }
			}
		}

		# TEMPLATE
		target_width = 41
		width_weight = 1
		column_swap_factor = 1.5
		reinforce_prio = 6

		target_template = {
			weight = 0.95
			match_value = 10000

			regiments = {
				medium_armor = 5
				medium_sp_anti_air_brigade = 2
				medium_tank_destroyer_brigade = 1
				infantry = 7
				artillery_brigade = 5
			}

			support = {
				engineer = 1
				logistics_company = 1
				maintenance_company = 1
			}
		}

		allowed_types = {
			# REGIMENTS
			medium_armor
			medium_sp_anti_air_brigade
			medium_tank_destroyer_brigade
			infantry
			artillery_brigade

			# SUPPORT
			engineer
			logistics_company
			maintenance_company
		}
	}
}