scripted_gui = {

	EAI_open_config = {

		context_type = player_context

		window_name = "EAI_open_config"

		visible = {
			is_ai = no

			OR = {
				NOT = { has_global_flag = EAI_restrict_to_host }
				has_country_flag = EAI_designated_host
				AND = {
					has_global_flag = EAI_restrict_to_host
					NOT = { any_other_country = { has_country_flag = EAI_designated_host } }
				}
			}
		}

		effects = {
			EAI_open_config_button_click = {
				set_country_flag = EAI_config_DIFFICULTY
				
				set_country_flag = EAI_show_country_config_decisions
				
				every_other_country = { limit = { is_ai = no } country_event = EAI.4 }
			}
		}

		triggers = {
			EAI_open_config_button_click_enabled = {
				NOT = {  
					has_country_flag = EAI_config_STARTUP
					has_country_flag = EAI_config_DIFFICULTY
					has_country_flag = EAI_config_GENERAL
				}
			}
		}
	}

	EAI_open_country_config = {

		context_type = selected_country_context

		window_name = "EAI_open_country_config"

		visible = {
			ROOT = { OR = { has_country_flag = EAI_config_STARTUP has_country_flag = EAI_config_DIFFICULTY has_country_flag = EAI_config_GENERAL } }
		}

		effects = {
			EAI_open_country_config_button_click = {
				ROOT = {
					set_country_flag = EAI_config_COUNTRY

					PREV = {
						if = { limit = { NOT = { event_target:EAI_AI_customisation_global_1 = { has_country_flag = EAI_player_is_configuring_this_country } } }
							save_global_event_target_as = EAI_AI_customisation_global_1
						}
						else_if = { limit = { NOT = { event_target:EAI_AI_customisation_global_2 = { has_country_flag = EAI_player_is_configuring_this_country } } }
							save_global_event_target_as = EAI_AI_customisation_global_2
						}
						else_if = { limit = { NOT = { event_target:EAI_AI_customisation_global_3 = { has_country_flag = EAI_player_is_configuring_this_country } } }
							save_global_event_target_as = EAI_AI_customisation_global_3
						}
						else_if = { limit = { NOT = { event_target:EAI_AI_customisation_global_4 = { has_country_flag = EAI_player_is_configuring_this_country } } }
							save_global_event_target_as = EAI_AI_customisation_global_4
						}
						else_if = { limit = { NOT = { event_target:EAI_AI_customisation_global_5 = { has_country_flag = EAI_player_is_configuring_this_country } } }
							save_global_event_target_as = EAI_AI_customisation_global_5
						}
						else = {
							save_global_event_target_as = EAI_AI_customisation_global_1
						}
					
						set_country_flag = EAI_player_is_configuring_this_country

						set_country_flag = EAI_player_is_configuring_this_country_@ROOT

						set_variable = { ROOT.EAI_configuration_target = THIS.id }
					}
					
					set_variable = { ROOT.EAI_dd_unit_count = PREV.EAI_dd_unit_count }
				}
			}
		}

		triggers = {
			EAI_open_country_config_button_click_enabled = {
				is_ai = yes
				
				NOT = { tag = ROOT }

				NOT = { has_country_flag = EAI_player_is_configuring_this_country has_country_flag = EAI_AI_is_configuring_this_country }

				NOT = { 
					ROOT = { has_country_flag = EAI_config_COUNTRY } 
					ROOT = { has_country_flag = EAI_config_ARMY } 
					ROOT = { has_country_flag = EAI_config_ARMY_DIPLOMATIC } 
				}
			}
		}
	}
}