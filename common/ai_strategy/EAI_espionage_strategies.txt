############################################################################################################
#	Expert AI mod
############################################################################################################

### Agency

EAI_agency_stop_upgrades = {
	enable = {
		always = yes
	}
	
	ai_strategy = {
		type = intelligence_agency_usable_factories
		value = -15
	}
}

EAI_build_intelligence_agency = {
	enable = {
		date > 1936.6.1

		NOT = { has_intelligence_agency = yes }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = intelligence_agency_usable_factories
		value = 30
	}
}

EAI_upgrade_intelligence_agency = {
	enable = {
		date > 1937.1.1

		NOT = { check_variable = { agency_upgrade_number < 5 } }

		OR = {
			date > 1939.1.1
			has_war = yes
		}

		check_variable = { agency_upgrade_number < EAI_max_agency_upgrades }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = intelligence_agency_usable_factories
		value = 30
	}
}

### Missions/operations

EAI_counterintelligence_mission = {
	enable = {
		OR = {
			NOT = { has_variable = EAI_operation_target }

			check_variable = { EAI_available_operatives > 3 }

			is_running_operation = { target = var:EAI_operation_target operation = var:EAI_operation_type }
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_mission
		mission = counter_intelligence
		value = 50000
		mission_target = ROOT
		num_operatives = 1
	}
}

EAI_counterintelligence_mission_2 = {
	enable = {
		check_variable = { EAI_available_operatives > 5 }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_mission
		mission = counter_intelligence
		value = 50000
		mission_target = ROOT
		num_operatives = 1
	}
}

### Keep the network up while running an op in case AI wants another op here later

EAI_quiet_network_mission = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives > 0 }
		is_running_operation = { target = var:EAI_operation_target operation = var:EAI_operation_type }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_mission
		mission = quiet_network
		value = 10000
		mission_target = var:EAI_operation_target
		num_operatives = 1
	}
}

### AI doesnt seem to want to run the op if it cant provide the exact amount of operatives in the strategy

EAI_espionage_operation_1 = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives = 1 }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_operation
		operation = var:EAI_operation_type
		value = 500000
		operation_target = var:EAI_operation_target
	}

	ai_strategy = {
		type = operation_equipment_priority
		value = 100
	}

	ai_strategy = {
		type = operative_mission
		mission = build_intel_network
		value = 10000
		mission_target = var:EAI_operation_target
		num_operatives = 1
	}
}

EAI_espionage_operation_2 = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives = 2 }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_operation
		operation = var:EAI_operation_type
		value = 500000
		operation_target = var:EAI_operation_target
	}

	ai_strategy = {
		type = operation_equipment_priority
		value = 100
	}

	ai_strategy = {
		type = operative_mission
		mission = build_intel_network
		value = 10000
		mission_target = var:EAI_operation_target
		num_operatives = 2
	}
}

EAI_espionage_operation_3 = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives > 2 }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_operation
		operation = var:EAI_operation_type
		value = 500000
		operation_target = var:EAI_operation_target
	}

	ai_strategy = {
		type = operation_equipment_priority
		value = 100
	}

	ai_strategy = {
		type = operative_mission
		mission = build_intel_network
		value = 10000
		mission_target = var:EAI_operation_target
		num_operatives = 3
	}
}

### Operations that require special state targets

EAI_espionage_operation_heavy_water_raid = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives = 2 }
		check_variable = { EAI_operation_type = token:heavy_water_raid }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_operation
		operation = var:EAI_operation_type
		value = 500000
		operation_target = var:EAI_operation_target
	}

	ai_strategy = {
		type = operation_equipment_priority
		value = 100
	}

	ai_strategy = {
		type = operative_mission
		mission = build_intel_network
		value = 10000
		priority = 100
		mission_target = var:EAI_operation_target
		num_operatives = 2
		state = 110
	}
}

EAI_espionage_operation_warsaw_uprising = {
	enable = {
		has_variable = EAI_operation_target
		check_variable = { EAI_available_operatives = 2 }
		has_country_flag = EAI_operation_warsaw_uprising_OPERATION_ACTIVE
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = operative_operation
		operation = var:EAI_operation_type
		value = 500000
		operation_target = var:EAI_operation_target
	}

	ai_strategy = {
		type = operation_equipment_priority
		value = 100
	}

	ai_strategy = {
		type = operative_mission
		mission = build_intel_network
		value = 10000
		priority = 100
		mission_target = var:EAI_operation_target
		num_operatives = 2
		state = 10
		state = 87
		state = 98
		state = 90
		state = 92
		state = 92
	}
}