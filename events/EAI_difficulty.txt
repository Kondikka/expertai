add_namespace = EAI_H

############################################################################################################
# Expert AI mod - difficulty events
############################################################################################################

############# difficulty bonus

country_event = {
	id = EAI_H.0
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		
		OR = { 
			has_country_flag = EAI_country_bonus_HARD 
			has_country_flag = EAI_country_bonus_VERY_HARD 
			has_country_flag = EAI_country_bonus_INSANE
			
			AND = { 
				NOT = { 
					has_country_flag = EAI_country_bonus 
					has_country_flag = EAI_disable_bonus 
				}
			
				OR = {
					has_global_flag = EAI_dynamic_hard_enemies 
					has_global_flag = EAI_dynamic_very_hard_enemies
					has_global_flag = EAI_dynamic_insane_enemies
				}
				
				EAI_dynamic_bonus_trigger = yes 
			} 
		} 
	}
	immediate = {
		set_country_flag = EAI_country_bonus_active
		
		if = {
			limit = {
				NOT = { has_country_flag = EAI_country_bonus }
			
				OR = {
					has_global_flag = EAI_dynamic_hard_enemies 
					has_global_flag = EAI_dynamic_very_hard_enemies
					has_global_flag = EAI_dynamic_insane_enemies
				}
				
				EAI_dynamic_bonus_trigger = yes 
			}
			
			set_country_flag = EAI_dynamic_country_bonus_active
		}
		
		if = { 
			limit = { 
				OR = { 
					has_country_flag = EAI_country_bonus_HARD 
					
					AND = { 
						NOT = { has_country_flag = EAI_country_bonus }
					
						has_global_flag = EAI_dynamic_hard_enemies 
					} 
				} 
			}
			
			add_ideas = EAI_hard_mode
		
			EAI_apply_difficulty_HARD = yes

			log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | BONUS: applying hard mode"
		}

		if = { 
			limit = { 
				OR = { 
					has_country_flag = EAI_country_bonus_VERY_HARD 
					
					AND = { 
						NOT = { has_country_flag = EAI_country_bonus }
						
						has_global_flag = EAI_dynamic_very_hard_enemies 
						
						EAI_dynamic_bonus_trigger = yes 
					} 
				} 
			}
			
			add_ideas = EAI_very_hard_mode
		
			EAI_apply_difficulty_VERY_HARD = yes

			log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | BONUS: applying very hard mode"
		}
		
		if = { 
			limit = { 
				OR = { 
					has_country_flag = EAI_country_bonus_INSANE 
					
					AND = {
						NOT = { has_country_flag = EAI_country_bonus }
						
						has_global_flag = EAI_dynamic_insane_enemies 
						
						EAI_dynamic_bonus_trigger = yes 
					} 
				} 
			}
			
			add_ideas = EAI_insane_mode
		
			EAI_apply_difficulty_INSANE = yes

			log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | BONUS: applying insane mode"
		}
		
		#only one equipment production boost can be active at any time
		EAI_fix_production_boost = yes
	}
	option = {}
}

country_event = { # remove difficulty bonus
	id = EAI_H.1
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		OR = {
			AND = {
				is_ai = no
			
				has_country_flag = EAI_country_bonus_active
			}
		
			has_country_flag = EAI_dynamic_country_bonus_active
		}
	
		OR  = {
			AND = {
				is_ai = no
			}
			
			AND = {
				is_ai = yes
		
				NOT = {
					AND = { 
						NOT = { has_country_flag = EAI_country_bonus }
					
						OR = {
							has_global_flag = EAI_dynamic_hard_enemies 
							has_global_flag = EAI_dynamic_very_hard_enemies
							has_global_flag = EAI_dynamic_insane_enemies
						}
						
						EAI_dynamic_bonus_trigger = yes 
					} 
				}
			}
		}
	}
	immediate = {
		EAI_clear_difficulty = yes
		
		clr_country_flag = EAI_dynamic_country_bonus_active

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | BONUS: removing"
	}
	option = {}
}

############# attrition

country_event = {
	id = EAI_H.1020
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes

		NOT = {
			has_idea = EAI_attrition_reduction
			has_idea = EAI_attrition_reduction2
			has_idea = EAI_attrition_reduction3
		}

		OR = {
			has_global_flag = EAI_attrition_1
			has_global_flag = EAI_attrition_2
			has_global_flag = EAI_attrition_3
		}
	}
	immediate = {
		if = { limit = { has_global_flag = EAI_attrition_1 }
			add_ideas = EAI_attrition_reduction
		}
		if = { limit = { has_global_flag = EAI_attrition_2 }
			add_ideas = EAI_attrition_reduction2
		}
		if = { limit = { has_global_flag = EAI_attrition_3 }
			add_ideas = EAI_attrition_reduction3
		}

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | ATTRITION: adding idea"
	}
	option = {}
}

############# resistance

country_event = { #resistance modifier for new countries
	id = EAI_H.6
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		is_ai = yes
		NOT = { has_idea = EAI_resistance_effects_reduced } 
		date > 1936.2.1
		NOT = { has_global_flag = EAI_no_resistance_reduction }
	}
	immediate = {
		add_ideas = EAI_resistance_effects_reduced

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | resistance reduction"
	}
	option = {}
}

############# convoys

country_event = { #free convoys for the AI
	id = EAI_H.4
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		has_global_flag = EAI_free_convoys
		is_ai = yes
		any_state = { is_controlled_by = ROOT is_coastal = yes }
		has_equipment = { convoy < 50 }
	}
	immediate = {
		add_equipment_to_stockpile = { type = convoy_1 amount = 50 }

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | adding convoys"
	}
	option = {}
}

############# desperate defense

country_event = { # normal
	id = EAI_H.200
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { 
		is_ai = yes
		
		has_capitulated = no
		
		OR = { 
			has_country_flag = EAI_desperate_defense_NORMAL
			
			AND = { 
				NOT = { 
					has_country_flag = EAI_desperate_defense 
					has_country_flag = EAI_disable_desperate_defense
				}
			
				has_global_flag = EAI_dynamic_desperate_defense_NORMAL
				
				any_enemy_country = { is_ai = no } 
			} 
		}
	}
	immediate = {
		set_country_flag = EAI_desperate_defense_active

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | DESPERATE DEFENSE: applying normal mode"
		
		if = {
			limit = {
				NOT = { has_country_flag = EAI_desperate_defense }
			
				has_global_flag = EAI_dynamic_desperate_defense_NORMAL
				
				any_enemy_country = { is_ai = no } 
			}
			
			set_country_flag = EAI_dynamic_desperate_defense_active
		}
	
		if = { limit = { surrender_progress > 0.025 NOT = { surrender_progress > 0.050 } } add_ideas = EAI_desperate_defense_1  EAI_apply_desperate_defense_1 = yes  else = { remove_ideas = EAI_desperate_defense_1  EAI_clear_desperate_defense_1 = yes } }
		if = { limit = { surrender_progress > 0.050 NOT = { surrender_progress > 0.075 } } add_ideas = EAI_desperate_defense_2  EAI_apply_desperate_defense_2 = yes  else = { remove_ideas = EAI_desperate_defense_2  EAI_clear_desperate_defense_2 = yes } }
		if = { limit = { surrender_progress > 0.075 NOT = { surrender_progress > 0.100 } } add_ideas = EAI_desperate_defense_3  EAI_apply_desperate_defense_3 = yes  else = { remove_ideas = EAI_desperate_defense_3  EAI_clear_desperate_defense_3 = yes } }
		if = { limit = { surrender_progress > 0.100 NOT = { surrender_progress > 0.125 } } add_ideas = EAI_desperate_defense_4  EAI_apply_desperate_defense_4 = yes  else = { remove_ideas = EAI_desperate_defense_4  EAI_clear_desperate_defense_4 = yes } }
		if = { limit = { surrender_progress > 0.125 NOT = { surrender_progress > 0.150 } } add_ideas = EAI_desperate_defense_5  EAI_apply_desperate_defense_5 = yes  else = { remove_ideas = EAI_desperate_defense_5  EAI_clear_desperate_defense_5 = yes } }
		if = { limit = { surrender_progress > 0.150 NOT = { surrender_progress > 0.175 } } add_ideas = EAI_desperate_defense_6  EAI_apply_desperate_defense_6 = yes  else = { remove_ideas = EAI_desperate_defense_6  EAI_clear_desperate_defense_6 = yes } }
		if = { limit = { surrender_progress > 0.175 NOT = { surrender_progress > 0.200 } } add_ideas = EAI_desperate_defense_7  EAI_apply_desperate_defense_7 = yes  else = { remove_ideas = EAI_desperate_defense_7  EAI_clear_desperate_defense_7 = yes } }
		if = { limit = { surrender_progress > 0.200 NOT = { surrender_progress > 0.225 } } add_ideas = EAI_desperate_defense_8  EAI_apply_desperate_defense_8 = yes  else = { remove_ideas = EAI_desperate_defense_8  EAI_clear_desperate_defense_8 = yes } }
		if = { limit = { surrender_progress > 0.225 NOT = { surrender_progress > 0.250 } } add_ideas = EAI_desperate_defense_9  EAI_apply_desperate_defense_9 = yes  else = { remove_ideas = EAI_desperate_defense_9  EAI_clear_desperate_defense_9 = yes } }
		if = { limit = { surrender_progress > 0.250 NOT = { surrender_progress > 0.275 } } add_ideas = EAI_desperate_defense_10 EAI_apply_desperate_defense_10 = yes else = { remove_ideas = EAI_desperate_defense_10 EAI_clear_desperate_defense_10 = yes } }
		if = { limit = { surrender_progress > 0.275 NOT = { surrender_progress > 0.300 } } add_ideas = EAI_desperate_defense_11 EAI_apply_desperate_defense_11 = yes else = { remove_ideas = EAI_desperate_defense_11 EAI_clear_desperate_defense_11 = yes } }
		if = { limit = { surrender_progress > 0.300 NOT = { surrender_progress > 0.325 } } add_ideas = EAI_desperate_defense_12 EAI_apply_desperate_defense_12 = yes else = { remove_ideas = EAI_desperate_defense_12 EAI_clear_desperate_defense_12 = yes } }
		if = { limit = { surrender_progress > 0.325 NOT = { surrender_progress > 0.350 } } add_ideas = EAI_desperate_defense_13 EAI_apply_desperate_defense_13 = yes else = { remove_ideas = EAI_desperate_defense_13 EAI_clear_desperate_defense_13 = yes } }
		if = { limit = { surrender_progress > 0.350 NOT = { surrender_progress > 0.375 } } add_ideas = EAI_desperate_defense_14 EAI_apply_desperate_defense_14 = yes else = { remove_ideas = EAI_desperate_defense_14 EAI_clear_desperate_defense_14 = yes } }
		if = { limit = { surrender_progress > 0.375 NOT = { surrender_progress > 0.400 } } add_ideas = EAI_desperate_defense_15 EAI_apply_desperate_defense_15 = yes else = { remove_ideas = EAI_desperate_defense_15 EAI_clear_desperate_defense_15 = yes } }
		if = { limit = { surrender_progress > 0.400 NOT = { surrender_progress > 0.425 } } add_ideas = EAI_desperate_defense_16 EAI_apply_desperate_defense_16 = yes else = { remove_ideas = EAI_desperate_defense_16 EAI_clear_desperate_defense_16 = yes } }
		if = { limit = { surrender_progress > 0.425 NOT = { surrender_progress > 0.450 } } add_ideas = EAI_desperate_defense_17 EAI_apply_desperate_defense_17 = yes else = { remove_ideas = EAI_desperate_defense_17 EAI_clear_desperate_defense_17 = yes } }
		if = { limit = { surrender_progress > 0.450 NOT = { surrender_progress > 0.475 } } add_ideas = EAI_desperate_defense_18 EAI_apply_desperate_defense_18 = yes else = { remove_ideas = EAI_desperate_defense_18 EAI_clear_desperate_defense_18 = yes } }
		if = { limit = { surrender_progress > 0.475 NOT = { surrender_progress > 0.500 } } add_ideas = EAI_desperate_defense_19 EAI_apply_desperate_defense_19 = yes else = { remove_ideas = EAI_desperate_defense_19 EAI_clear_desperate_defense_19 = yes } }
		if = { limit = { surrender_progress > 0.500                                      } add_ideas = EAI_desperate_defense_20 EAI_apply_desperate_defense_20 = yes else = { remove_ideas = EAI_desperate_defense_20 EAI_clear_desperate_defense_20 = yes } }
	
		#only one equipment production boost can be active at any time
		EAI_fix_production_boost = yes
	}
	
	option = {}
}

country_event = { # high
	id = EAI_H.201
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { 
		is_ai = yes
		
		has_capitulated = no
		
		OR = { 
			has_country_flag = EAI_desperate_defense_HIGH
			
			AND = { 
				NOT = { 
					has_country_flag = EAI_desperate_defense 
					has_country_flag = EAI_disable_desperate_defense
				}
			
				has_global_flag = EAI_dynamic_desperate_defense_HIGH
				
				any_enemy_country = { is_ai = no } 
			} 
		}
	}
	immediate = {
		set_country_flag = EAI_desperate_defense_active

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | DESPERATE DEFENSE: applying high mode"
		
		if = {
			limit = {
				NOT = { has_country_flag = EAI_desperate_defense }
			
				has_global_flag = EAI_dynamic_desperate_defense_HIGH
				
				any_enemy_country = { is_ai = no } 
			}
			
			set_country_flag = EAI_dynamic_desperate_defense_active
		}
	
		if = { limit = { surrender_progress > 0.000 NOT = { surrender_progress > 0.050 } } add_ideas = EAI_desperate_defense_10 EAI_apply_desperate_defense_10 = yes else = { remove_ideas = EAI_desperate_defense_10 EAI_clear_desperate_defense_10 = yes } }
		if = { limit = { surrender_progress > 0.050 NOT = { surrender_progress > 0.100 } } add_ideas = EAI_desperate_defense_11 EAI_apply_desperate_defense_11 = yes else = { remove_ideas = EAI_desperate_defense_11 EAI_clear_desperate_defense_11 = yes } }
		if = { limit = { surrender_progress > 0.100 NOT = { surrender_progress > 0.150 } } add_ideas = EAI_desperate_defense_12 EAI_apply_desperate_defense_12 = yes else = { remove_ideas = EAI_desperate_defense_12 EAI_clear_desperate_defense_12 = yes } }
		if = { limit = { surrender_progress > 0.150 NOT = { surrender_progress > 0.200 } } add_ideas = EAI_desperate_defense_13 EAI_apply_desperate_defense_13 = yes else = { remove_ideas = EAI_desperate_defense_13 EAI_clear_desperate_defense_13 = yes } }
		if = { limit = { surrender_progress > 0.200 NOT = { surrender_progress > 0.250 } } add_ideas = EAI_desperate_defense_14 EAI_apply_desperate_defense_14 = yes else = { remove_ideas = EAI_desperate_defense_14 EAI_clear_desperate_defense_14 = yes } }
		if = { limit = { surrender_progress > 0.250 NOT = { surrender_progress > 0.300 } } add_ideas = EAI_desperate_defense_15 EAI_apply_desperate_defense_15 = yes else = { remove_ideas = EAI_desperate_defense_15 EAI_clear_desperate_defense_15 = yes } }
		if = { limit = { surrender_progress > 0.300 NOT = { surrender_progress > 0.350 } } add_ideas = EAI_desperate_defense_16 EAI_apply_desperate_defense_16 = yes else = { remove_ideas = EAI_desperate_defense_16 EAI_clear_desperate_defense_16 = yes } }
		if = { limit = { surrender_progress > 0.350 NOT = { surrender_progress > 0.400 } } add_ideas = EAI_desperate_defense_17 EAI_apply_desperate_defense_17 = yes else = { remove_ideas = EAI_desperate_defense_17 EAI_clear_desperate_defense_17 = yes } }
		if = { limit = { surrender_progress > 0.400 NOT = { surrender_progress > 0.450 } } add_ideas = EAI_desperate_defense_18 EAI_apply_desperate_defense_18 = yes else = { remove_ideas = EAI_desperate_defense_18 EAI_clear_desperate_defense_18 = yes } }
		if = { limit = { surrender_progress > 0.450 NOT = { surrender_progress > 0.500 } } add_ideas = EAI_desperate_defense_19 EAI_apply_desperate_defense_19 = yes else = { remove_ideas = EAI_desperate_defense_19 EAI_clear_desperate_defense_19 = yes } }
		if = { limit = { surrender_progress > 0.500                                      } add_ideas = EAI_desperate_defense_20 EAI_apply_desperate_defense_20 = yes else = { remove_ideas = EAI_desperate_defense_20 EAI_clear_desperate_defense_20 = yes } }
	
		#only one equipment production boost can be active at any time
		EAI_fix_production_boost = yes
	}
	
	option = {}
}

country_event = { # low
	id = EAI_H.202
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = { 
		is_ai = yes
		
		has_capitulated = no
		
		OR = { 
			has_country_flag = EAI_desperate_defense_LOW
			
			AND = { 
				NOT = { 
					has_country_flag = EAI_desperate_defense 
					has_country_flag = EAI_disable_desperate_defense
				}
			
				has_global_flag = EAI_dynamic_desperate_defense_LOW
				
				any_enemy_country = { is_ai = no } 
			} 
		}
	}
	immediate = {
		set_country_flag = EAI_desperate_defense_active

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | DESPERATE DEFENSE: applying low mode"
		
		if = {
			limit = {
				NOT = { has_country_flag = EAI_desperate_defense }
			
				has_global_flag = EAI_dynamic_desperate_defense_LOW
				
				any_enemy_country = { is_ai = no } 
			}
			
			set_country_flag = EAI_dynamic_desperate_defense_active
		}

		if = { limit = { surrender_progress > 0.000 NOT = { surrender_progress > 0.010 } } add_ideas = EAI_desperate_defense_1  EAI_apply_desperate_defense_1 = yes  else = { remove_ideas = EAI_desperate_defense_1  EAI_clear_desperate_defense_1 = yes } }
		if = { limit = { surrender_progress > 0.010 NOT = { surrender_progress > 0.020 } } add_ideas = EAI_desperate_defense_2  EAI_apply_desperate_defense_2 = yes  else = { remove_ideas = EAI_desperate_defense_2  EAI_clear_desperate_defense_2 = yes } }
		if = { limit = { surrender_progress > 0.020 NOT = { surrender_progress > 0.030 } } add_ideas = EAI_desperate_defense_3  EAI_apply_desperate_defense_3 = yes  else = { remove_ideas = EAI_desperate_defense_3  EAI_clear_desperate_defense_3 = yes } }
		if = { limit = { surrender_progress > 0.030 NOT = { surrender_progress > 0.040 } } add_ideas = EAI_desperate_defense_4  EAI_apply_desperate_defense_4 = yes  else = { remove_ideas = EAI_desperate_defense_4  EAI_clear_desperate_defense_4 = yes } }
		if = { limit = { surrender_progress > 0.040 NOT = { surrender_progress > 0.050 } } add_ideas = EAI_desperate_defense_5  EAI_apply_desperate_defense_5 = yes  else = { remove_ideas = EAI_desperate_defense_5  EAI_clear_desperate_defense_5 = yes } }
		if = { limit = { surrender_progress > 0.050 NOT = { surrender_progress > 0.060 } } add_ideas = EAI_desperate_defense_6  EAI_apply_desperate_defense_6 = yes  else = { remove_ideas = EAI_desperate_defense_6  EAI_clear_desperate_defense_6 = yes } }
		if = { limit = { surrender_progress > 0.060 NOT = { surrender_progress > 0.070 } } add_ideas = EAI_desperate_defense_7  EAI_apply_desperate_defense_7 = yes  else = { remove_ideas = EAI_desperate_defense_7  EAI_clear_desperate_defense_7 = yes } }
		if = { limit = { surrender_progress > 0.070 NOT = { surrender_progress > 0.080 } } add_ideas = EAI_desperate_defense_8  EAI_apply_desperate_defense_8 = yes  else = { remove_ideas = EAI_desperate_defense_8  EAI_clear_desperate_defense_8 = yes } }
		if = { limit = { surrender_progress > 0.080 NOT = { surrender_progress > 0.090 } } add_ideas = EAI_desperate_defense_9  EAI_apply_desperate_defense_9 = yes  else = { remove_ideas = EAI_desperate_defense_9  EAI_clear_desperate_defense_9 = yes } }
		if = { limit = { surrender_progress > 0.090                                      } add_ideas = EAI_desperate_defense_10 EAI_apply_desperate_defense_10 = yes else = { remove_ideas = EAI_desperate_defense_10 EAI_clear_desperate_defense_10 = yes } }
	
		#only one equipment production boost can be active at any time
		EAI_fix_production_boost = yes
	}
	
	option = {}
}

country_event = { # remove desperate defense
	id = EAI_H.218
	hidden = yes
	mean_time_to_happen = { days = 2 }
	trigger = {
		has_country_flag = EAI_desperate_defense_active
	
		OR = {
			AND = {
				is_ai = no
			}
			
			AND = {
				is_ai = yes
				
				has_capitulated = yes
			}
		}
	}
	immediate = {
		EAI_clear_desperate_defense = yes

		log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | DESPERATE DEFENSE: removing"
	}
	option = {}
}

############# reinforcements

country_event = {
	id = EAI_H.300
	hidden = yes
	mean_time_to_happen = { days = 2 }

	trigger = {
		is_ai = yes

		has_capitulated = no

		OR = { has_country_flag = EAI_division_spawning AND = { has_global_flag = EAI_dynamic_division_spawning NOT = { has_country_flag = EAI_disable_division_spawning } any_enemy_country = { is_ai = no } } }

		surrender_progress > 0
	}

	immediate = {
		#EQUIPMENT

		#####################################################################################################
		if = {
			limit = { has_equipment = { infantry_equipment < 250 } }

			add_equipment_to_stockpile = { type = infantry_equipment amount = 5000 }
		}

		if = {
			limit = { has_tech = tech_support has_equipment = { support_equipment < 250 } }

			add_equipment_to_stockpile = { type = support_equipment amount = 1000 }
		}

		if = {
			limit = { has_tech = gw_artillery has_equipment = { artillery_equipment < 250 } }

			add_equipment_to_stockpile = { type = artillery_equipment amount = 1000 }
		}

		#####################################################################################################
		if = {
			limit = { has_tech = motorised_infantry has_equipment = { motorized_equipment < 250 } }

			add_equipment_to_stockpile = { type = motorized_equipment amount = 1000 }
		}

		if = {
			limit = { has_tech = mechanised_infantry has_equipment = { mechanized_equipment < 250 } }

			add_equipment_to_stockpile = { type = mechanized_equipment amount = 250 }
		}
		
		#####################################################################################################
		if = {
			limit = {
				OR = { has_tech = basic_light_tank has_tech = improved_light_tank has_tech = advanced_light_tank }
				has_equipment = { light_tank_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = light_tank_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_light_td has_tech = improved_light_td has_tech = advanced_light_td }
				has_equipment = { light_tank_destroyer_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = light_tank_destroyer_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_light_art has_tech = improved_light_art has_tech = advanced_light_art }
				has_equipment = { light_tank_artillery_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = light_tank_artillery_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_light_spaa has_tech = improved_light_spaa has_tech = advanced_light_spaa }
				has_equipment = { light_tank_aa_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = light_tank_aa_equipment amount = 250 }
		}

		#####################################################################################################
		if = {
			limit = {
				OR = { has_tech = basic_medium_tank has_tech = improved_medium_tank has_tech = advanced_medium_tank }
				has_equipment = { medium_tank_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = medium_tank_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }
				has_equipment = { medium_tank_destroyer_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = medium_tank_destroyer_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
				has_equipment = { medium_tank_artillery_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = medium_tank_artillery_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
				has_equipment = { medium_tank_aa_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = medium_tank_aa_equipment amount = 250 }
		}

		#####################################################################################################
		if = {
			limit = {
				OR = { has_tech = basic_heavy_tank has_tech = improved_heavy_tank has_tech = advanced_heavy_tank }
				has_equipment = { heavy_tank_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = heavy_tank_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_heavy_td has_tech = improved_heavy_td has_tech = advanced_heavy_td }
				has_equipment = { heavy_tank_destroyer_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = heavy_tank_destroyer_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_heavy_art has_tech = improved_heavy_art has_tech = advanced_heavy_art }
				has_equipment = { heavy_tank_artillery_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = heavy_tank_artillery_equipment amount = 250 }
		}
		if = {
			limit = {
				OR = { has_tech = basic_heavy_spaa has_tech = improved_heavy_spaa has_tech = advanced_heavy_spaa }
				has_equipment = { heavy_tank_aa_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = heavy_tank_aa_equipment amount = 250 }
		}

		#####################################################################################################
		if = {
			limit = {
				has_tech = main_battle_tank
				has_equipment = { modern_tank_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = modern_tank_equipment amount = 250 }
		}
		if = {
			limit = {
				has_tech = modern_td
				has_equipment = { modern_tank_destroyer_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = modern_tank_destroyer_equipment amount = 250 }
		}
		if = {
			limit = {
				has_tech = modern_art
				has_equipment = { modern_tank_artillery_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = modern_tank_artillery_equipment amount = 250 }
		}
		if = {
			limit = {
				has_tech = modern_spaa
				has_equipment = { modern_tank_aa_equipment < 250 }
			}

			add_equipment_to_stockpile = { type = modern_tank_aa_equipment amount = 250 }
		}

		#####################################################################################################

		#UNITS

		set_variable = { EAI_factories_to_divisions_ratio = num_of_factories }
		
		set_variable = { EAI_states_to_divisions_ratio = num_of_controlled_states }
		
		divide_variable = { EAI_factories_to_divisions_ratio = num_divisions }
		
		divide_variable = { EAI_states_to_divisions_ratio = num_divisions }

		if = {
			limit = {
				num_divisions < 250
				OR = {
					check_variable = { DS_factories_to_divisions_ratio > 1 }
					check_variable = { DS_states_to_divisions_ratio > 0.33 }
					num_divisions < 1
				}
			}

			if = { limit = { NOT = { has_country_flag = DS_has_reinforcements_@ROOT } }

				set_variable = { var = DS_dd_unit_count value = 0 }
			}

			set_country_flag = DS_has_reinforcements_@ROOT

			if = {
				limit = {
					any_state = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes

						any_neighbor_state = {
							is_controlled_by = ROOT

							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}
				}
				random_state = {
					limit = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes

						any_neighbor_state = {
							is_controlled_by = ROOT

							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}

					log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | REINFORCEMENTS: spawning units (prio 1)"

					random_list = {
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					any_state = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}
				}

				log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | REINFORCEMENTS: spawning units (prio 2)"
				
				random_state = {
					limit = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}

					random_list = {
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					any_state = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes
					}
				}

				log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | REINFORCEMENTS: spawning units (prio 3)"
				
				random_state = {
					limit = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						is_in_home_area = yes
					}

					random_list = {
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					any_state = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}
				}

				log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | REINFORCEMENTS: spawning units (prio 4)"

				random_state = {
					limit = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT

						NOT = {
							any_neighbor_state = {
								OR = {
									CONTROLLER = { has_war_with = ROOT }
									AND = { is_controlled_by = ROOT NOT = { ROOT = { has_full_control_of_state = PREV } } }
								}
							}
						}
					}

					random_list = {
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
					}
				}
			}
			else_if = {
				limit = {}

				log = "[GetYear] [GetMonth] | DIFFICULTY | [Root.GetName] | REINFORCEMENTS: spawning units (prio 5)"

				random_state = {
					limit = {
						ROOT = { has_full_control_of_state = PREV }
						is_owned_by = ROOT
					}

					random_list = {
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
						1 = {
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
							EAI_dd_spawn_unit = yes
						}
					}
				}
			}
		}
	}

	option = {}
}